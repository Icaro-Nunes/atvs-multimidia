<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js" integrity="sha512-jduERlz7En1IUZR54bqzpNI64AbffZWR//KJgF71SJ8D8/liKFZ+s1RxmUmB+bhCnIfzebdZsULwOrbVB5f3nQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <title>Atividade Tone JS</title>
</head>
<body>
    <button id="start-button">Iniciar Composição</button>
    <div id="output"></div>


    <script>
        // Crie uma instância de Tone.js Transport
        const transport = Tone.Transport;

        // Defina a função que será executada quando o botão for clicado
        document.getElementById('start-button').addEventListener('click', () => {

            // Inicie o transporte
            transport.start();

            // Adicione uma ação para ser executada a cada compasso
            transport.scheduleRepeat(() => {
                // Defina uma variável para o tom base
                const baseNote = 'D4';

                // Crie um oscilador e defina o tom base
                const oscillator = new Tone.Oscillator(baseNote, 'sine').toDestination();

                // Inicie o oscilador
                oscillator.start();


                let notes = [
                "D4", "A4", "D4", "D4", "A4", "D4", "E4", "F4", "E4", "F4", "E4", "C4", "A4", "A4", "D4", "F4", "G4", "A4", "A4", "D4", "F4", "G4", "E4", "D4", "A4", "D4", "D4", "A4", "D4", "E4", "F4", "E4", "F4", "E4", "C4", "A4", "A4", "D4", "F4", "G4", "A4", "A4", "D4", "D4", "A4", "D4", "D4", "A4", "D4", "E4", "F4", "E4", "F4", "E4", "C4", "A4", "A4", "D4", "F4", "G4", "A4", "A4", "D4", "F4", "G4", "E4", "D4", "A4", "D4", "D4", "A4", "D4", "E4", "F4", "E4", "F4", "E4", "C4", "A4", "A4", "D4", "F4", "G4", "A4", "A4", "D4" 
                ];

                // // Defina uma sequência de notas
                // const notes = ["A4","B4","D5","B4","F#5","F#5",null,"F#5","F#5",null,"E5","E5","E5",
                //                             "E5",null,null,"A4","B4","D5","B4","E5","E5",null,"E5","E5",null,"D5",
                //                             "D5","D5","C5","B4","B4",null,null];

                // Crie um loop para tocar as notas repetidamente
                let index = 0;

                transport.scheduleRepeat(() => {
                    oscillator.frequency.value = notes[index];
                    index = (index + 1) % notes.length;
                }, '16n');
            }, '16n');
            // Altere '16n' para ajustar o tempo entre cada compasso (ex: '8n' para semicolcheias)

            // Exiba uma mensagem no elemento 'output'
            document.getElementById('output').innerText = 'Composição iniciada. Para parar feche a aba do navegador.';
        });
    </script>
</body>
</html>